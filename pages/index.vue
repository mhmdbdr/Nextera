<template>
  <div class="homePage">
    <div class="heroSec">
      <div class="heroModule">
        <div class="videoSec">
          <video
            src="assets/videos/HPageMainVid.mp4"
            loop
            muted
            autoplay
            playsinline
            poster="assets/imgs/heroVid_poster.png"
          ></video>
        </div>
        <div class="textSec">
          <div class="title">
            <div class="part1">Empowering Connections,</div>
            <div class="part2">
              <span>Driving</span>
              <span></span>
              <span>Tomorrow’s</span>
            </div>
            <div class="part3">Boldest Ideas</div>
          </div>
          <div class="row">
            <div class="col-lg-4 col-md-6 offset-lg-2 offset-md-1">
              <div class="infoSec">
                <p>
                  Politico has said we run “the world’s premier tech
                  conference”, the Atlantic that Web Summit is “where the future
                  goes to be born”, and the New York Times that we assemble “a
                  grand conclave of the tech industry’s high priests”.
                </p>
                <span
                  >Web Summit brings together 70,000+ people, and the companies
                  redefining the tech industry.</span
                >
                <span class="linkto alract">
                  <NuxtLink to="/">
                    <span>Book tickets for 2025</span>
                    <font-awesome-icon icon="fa-regular fa-circle-right" />
                  </NuxtLink>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="about sec">
      <div class="container">
        <div class="row">
          <div class="col-lg-5 mb-lg-0 mb-5 offset-lg-1">
            <div class="text">
              <div class="title">what is Nextera?</div>
              <div class="info">
                <p>
                  Politico has said we run “the world’s premier tech
                  conference”, the Atlantic that Web Summit is “where the future
                  goes to be born”, and the New York Times that we assemble “a
                  grand conclave of the tech industry’s high priests”.
                </p>
                <p>
                  At a time of great uncertainty for many industries and,
                  indeed, the world itself, we gather policymakers, heads of
                  state, and the founders and CEOs of technology companies and
                  fast-growing startups, to ask a simple question: Where to
                  next?
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="img-container">
              <img src="/assets//imgs/aboutSec.jpg" alt="aboutImg" />
              <div class="numInfo">
                <div class="num">70,000+</div>
                <span>attendees </span>
              </div>
              <div class="numInfo">
                <div class="num">1,000+</div>
                <span>investors</span>
              </div>
              <div class="numInfo">
                <div class="num">3,000+</div>
                <span>companies</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="speakersSec sec">
      <div class="container">
        <div class="speakers">
          <UiAnimHeader>
            <template #ff> our 2024 speakers </template>
            <template #ss> our 2024 speakers </template>
            <template #tt> our 2024 speakers </template>
            <template #fo> our 2024 speakers </template>
          </UiAnimHeader>
          <div class="content row">
            <div class="speakerCard col-lg-4 col-md-6">
              <NuxtLink to="/">
                <img
                  src="assets/imgs/homePage/speakers/speaker_4.png"
                  alt="speakerCard"
                />
                <div class="info">
                  <div class="name">Pharrell Williams</div>
                  <div class="pos">Artist and Entrepreneur</div>
                </div>
              </NuxtLink>
            </div>
            <div class="speakerCard col-lg-4 col-md-6">
              <NuxtLink to="/">
                <img
                  src="assets/imgs/homePage/speakers/speaker_1.png"
                  alt="speakerCard"
                />
                <div class="info">
                  <div class="name">Pharrell Williams</div>
                  <div class="pos">Artist and Entrepreneur</div>
                </div>
              </NuxtLink>
            </div>
            <div class="speakerCard col-lg-4 col-md-6">
              <NuxtLink to="/">
                <img
                  src="assets/imgs/homePage/speakers/speaker_2.png"
                  alt="speakerCard"
                />
                <div class="info">
                  <div class="name">Pharrell Williams</div>
                  <div class="pos">Artist and Entrepreneur</div>
                </div>
              </NuxtLink>
            </div>
            <div class="speakerCard col-lg-4 col-md-6">
              <NuxtLink to="/">
                <img
                  src="assets/imgs/homePage/speakers/speaker_3.jpg"
                  alt="speakerCard"
                />
                <div class="info">
                  <div class="name">Pharrell Williams</div>
                  <div class="pos">Artist and Entrepreneur</div>
                </div>
              </NuxtLink>
            </div>
            <div class="speakerCard col-lg-4 col-md-6">
              <NuxtLink to="/">
                <img
                  src="assets/imgs/homePage/speakers/speaker_4.png"
                  alt="speakerCard"
                />
                <div class="info">
                  <div class="name">Pharrell Williams</div>
                  <div class="pos">Artist and Entrepreneur</div>
                </div>
              </NuxtLink>
            </div>
            <div class="speakerCard col-lg-4 col-md-6">
              <NuxtLink to="/">
                <img
                  src="assets/imgs/homePage/speakers/speaker_1.png"
                  alt="speakerCard"
                />
                <div class="info">
                  <div class="name">Pharrell Williams</div>
                  <div class="pos">Artist and Entrepreneur</div>
                </div>
              </NuxtLink>
            </div>
            <div class="speakerCard col-lg-4 col-md-6">
              <NuxtLink to="/">
                <img
                  src="assets/imgs/homePage/speakers/speaker_2.png"
                  alt="speakerCard"
                />
                <div class="info">
                  <div class="name">Pharrell Williams</div>
                  <div class="pos">Artist and Entrepreneur</div>
                </div>
              </NuxtLink>
            </div>
            <div class="speakerCard col-lg-4 col-md-6">
              <NuxtLink to="/">
                <img
                  src="assets/imgs/homePage/speakers/speaker_3.jpg"
                  alt="speakerCard"
                />
                <div class="info">
                  <div class="name">Pharrell Williams</div>
                  <div class="pos">Artist and Entrepreneur</div>
                </div>
              </NuxtLink>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
const { $gsap } = useNuxtApp()

let ctxHero
let ctxAbout
let ctxSpeakers
const gsapFunc = () => {
  ctxHero = $gsap.context(() => {
    const tl = $gsap.timeline({
      scrollTrigger: {
        trigger: ".heroModule",
        start: "top top",
        end: "bottom bottom",
        scrub: 0.1,
      },
    })

    const mm = $gsap.matchMedia()

    mm.add(
      {
        isMobile: "(max-width: 767px)",
        isTablet: "(min-width: 768px) and (max-width: 1023px)",
        isDesktop: "(min-width: 1024px) and (max-width: 1439px)",
        isLargeDesktop: "(min-width: 1440px)",
      },
      (context) => {
        const { isMobile, isTablet, isDesktop, isLargeDesktop } =
          context.conditions

        tl.to(".videoSec video", {
          y: 0,
          scale: 1,
          borderRadius: "0",
        })
          .to(
            ".textSec .title",
            {
              width: isLargeDesktop
                ? "65vw"
                : isDesktop
                ? "65vw"
                : isTablet
                ? "65vw"
                : "85vw",
              top: "20%",
              ease: "none",
            },
            0
          )
          .to(
            ".textSec .row",
            {
              bottom: "0px",
              ease: "none",
            },
            0
          )
      }
    )
  })
  ctxAbout = $gsap.context(() => {
    const aboutTl = $gsap.timeline({
      scrollTrigger: {
        trigger: ".img-container",
        start: "top center",
        end: "center center",
        toggleActions: "play none none reverse",
      },
    })
    aboutTl.from(".numInfo", {
      y: 50,
      opacity: 0,
      duration: 0.7,
      stagger: 0.1,
    })
  })
  ctxSpeakers = $gsap.context(() => {
    const container = document.querySelector(".speakers .content")
    const cards = container.querySelectorAll(".speakerCard")
    const speakersTl = $gsap.timeline({
      defaults: {
        ease: "power3",
      },
      scrollTrigger: {
        trigger: container,
        start: "top 75%",
        end: "bottom bottom",
        scrub: 1,
      },
    })
    speakersTl.from(cards, {
      stagger: 0.1,
      y: 200,
      autoAlpha: 0,
    })
  })
}

onMounted(() => {
  gsapFunc()
})

onUnmounted(() => {
  if (ctxHero) {
    ctxHero.revert()
  }
  if (ctxAbout) {
    ctxAbout.revert()
  }
  if (ctxSpeakers) {
    ctxSpeakers.revert()
  }
})
</script>

<style lang="scss" scoped>
.homePage {
  height: 4000px;
  background-color: black;
  color: white;
  .heroSec {
    position: relative;
    width: 100%;
    height: 200vh;
    .heroModule {
      position: relative;
      width: 100%;
      height: 200vh;
      .videoSec {
        position: absolute;
        height: 100%;
        width: 100%;
        video {
          position: sticky;
          top: 0;
          width: 100vw;
          height: 100vh;
          max-width: 100%;
          border-radius: 20px;
          object-fit: cover;
          transform: translate3d(0, 300px, 0px) scale(0.5);
        }
      }
      @media (max-width: 767px) {
        .textSec {
          .title {
            .part2 {
              span:nth-child(2) {
                margin: 0 10px;
              }
            }
          }
        }
      }
      .textSec {
        position: sticky;
        height: 100vh;
        width: 100%;
        top: 0;
        display: flex;
        align-items: flex-end;
        .title {
          position: absolute;
          left: 50%;
          transform: translateX(-50%);
          color: white;
          line-height: 1;
          white-space: nowrap;
          width: 90vw;
          font-size: 1.5rem;
          top: 30%;
          text-transform: capitalize;

          @media (min-width: 768px) and (max-width: 1023px) {
            width: 75vw;
            font-size: 3rem;
            line-height: 0.9;
          }

          @media (min-width: 1024px) and (max-width: 1439px) {
            width: 70vw;
            font-size: 4rem;
            line-height: 0.9;
          }

          @media (min-width: 1440px) {
            width: 70vw;
            font-size: 5rem;
            line-height: 0.9;
          }
          .part1,
          .part2,
          .part3 {
            @media (max-width: 426px) {
              text-align: center;
            }
          }
          .part2 {
            display: flex;
            justify-content: center;
            gap: 5px;
            span:nth-child(2) {
              display: none;
            }
            span:nth-child(3) {
              color: var(--prim-color);
              font-weight: bold;
            }
            @media (min-width: 426px) {
              align-items: center;
              justify-content: space-between;
              gap: 0;
              span:nth-child(2) {
                display: inline-block;
                flex-basis: 100%;
                margin: 0 10px;
                height: 2px;
                background-color: white;
              }
              span:nth-child(3) {
                color: white;
              }
            }
            span:nth-child(3) {
              font-family: "Noto Serif", serif;
            }
          }
          .part3 {
            @media (min-width: 426px) {
              text-align: end;
            }
          }
        }
        .row {
          margin-right: 0;
          margin-left: 0;
          position: absolute;
          left: 0;
          bottom: -500px;
        }
        .infoSec {
          color: white;
          margin: 20px 0 20px;
          @media (min-width: 1024px) {
            margin: 20px 0 70px;
          }
          p {
            line-height: 1.3;
            margin-bottom: 30px;
          }
          & > span:nth-of-type(1) {
            display: block;
            margin-bottom: 30px;
          }
        }
      }
    }
  }
  .about {
    .row {
      display: flex;
      align-items: center;
      .text {
        color: var(--para1-color);
        @media (width <= 576px) {
          .title {
            font-size: 35px !important;
          }
        }
        .title {
          font-size: 45px;
          font-weight: bold;
          color: var(--para2-color);
          text-transform: capitalize;
        }
      }
      .img-container {
        position: relative;
        img {
          max-width: 100%;
          width: 100%;
        }
        @media (width < 576px) {
          .numInfo {
            padding: 10px 15px !important;
          }
        }
        .numInfo {
          position: absolute;
          display: flex;
          align-items: center;
          flex-direction: column;
          padding: 15px 20px;
          backdrop-filter: blur(5px);
          border-radius: 10px;
          @media (991px < width < 1200px) {
            .num {
              font-size: 1.8rem !important;
            }
          }
          @media (width < 576px) {
            .num {
              font-size: 1.2rem !important;
            }
          }
          .num {
            font-size: 2.5rem;
            font-weight: bold;
          }
          &:nth-last-of-type(1) {
            top: 7%;
            left: 3%;
            .num {
              color: rgb(0, 172, 168);
            }
          }
          &:nth-last-of-type(2) {
            top: 50%;
            right: 3%;
            .num {
              color: rgb(240, 90, 44);
            }
          }
          &:nth-last-of-type(3) {
            bottom: 5%;
            left: 15%;
            .num {
              color: #60a6fb;
            }
          }
        }
      }
    }
  }
  .speakersSec {
    .speakers {
      .content {
        .speakerCard {
          height: fit-content;
          margin-bottom: 10px;
          a {
            position: relative;
            display: block;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 20px;
            &::before {
              content: "";
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background-color: rgba(0, 0, 0, 0.388);
              border-radius: 20px;
              transition-duration: 0.3s;
            }
            &:hover {
              &::before {
                opacity: 0;
              }
              img {
                transform: scale(1.1);
              }
            }
            img {
              max-width: 100%;
              width: 100%;
              transition-duration: 0.3s;
            }
            .info {
              position: absolute;
              bottom: 10px;
              left: 10px;
            }
          }
        }
      }
    }
  }
}
</style>
